{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\erick\\\\Documents\\\\prototipo-lec\\\\frontend\\\\src\\\\components\\\\Game1.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Game1 = () => {\n  _s();\n  const {\n    exerciseId\n  } = useParams(); // Obtén el ID del ejercicio de la URL\n  const [exercise, setExercise] = useState(null);\n  const [user, setUser] = useState(null); // Información del usuario\n  const [userExperience, setUserExperience] = useState(0);\n  const [level, setLevel] = useState(1);\n  const history = useHistory();\n\n  // Obtener el ejercicio desde la base de datos\n  useEffect(() => {\n    const fetchExercise = async () => {\n      try {\n        const response = await axios.get(`/api/exercises/${exerciseId}`);\n        const exerciseData = response.data;\n\n        // Obtener detalles de Codewars usando el codewarsId\n        const codewarsResponse = await axios.get(`/api/codewars/challenge/${exerciseData.codewarsId}`);\n        setExercise({\n          ...exerciseData,\n          title: codewarsResponse.data.name,\n          description: codewarsResponse.data.description,\n          code: exerciseData.answer.python // Usar solo Python por ahora\n        });\n      } catch (error) {\n        console.error(\"Error al obtener el ejercicio:\", error);\n      }\n    };\n    fetchExercise();\n  }, [exerciseId]);\n\n  // Obtener el usuario desde la base de datos\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await axios.get('/api/users/67869f7defd086ba28f87d41'); // Usar el ID del usuario\n        setUser(response.data);\n        setUserExperience(response.data.experiencePoints);\n        setLevel(response.data.level);\n      } catch (error) {\n        console.error(\"Error al obtener el usuario:\", error);\n      }\n    };\n    fetchUser();\n  }, []);\n\n  // Manejar la correcta finalización del ejercicio\n  const handleCompleteExercise = () => {\n    // Supongamos que el usuario completó el ejercicio correctamente\n    const newExperience = userExperience + 100; // Aumentamos 100 puntos de experiencia\n\n    // Verificamos si el usuario ha alcanzado 1000 puntos para aumentar de nivel\n    const newLevel = newExperience >= 1000 ? Math.floor(newExperience / 1000) + 1 : level;\n\n    // Actualizamos el estado del usuario\n    setUserExperience(newExperience);\n    setLevel(newLevel);\n\n    // Aquí deberíamos actualizar los datos del usuario en el backend\n    axios.put(`/api/users/${user._id}`, {\n      experiencePoints: newExperience,\n      level: newLevel,\n      completedChallenges: [...user.completedChallenges, exerciseId]\n    }).then(() => {\n      alert(\"¡Ejercicio completado!\");\n      history.push(`/game${newLevel}`); // Redirigir a la siguiente página del juego\n    }).catch(error => {\n      console.error(\"Error al actualizar el usuario:\", error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-container\",\n    children: exercise && user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"exercise-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: exercise.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: exercise.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"exercise-code\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Complete the following code:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: exercise.code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Level: \", level]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Experience: \", userExperience]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCompleteExercise,\n        children: \"Complete Exercise\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading exercise and user information...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(Game1, \"keKCTZJyc4xVgLohPTO+sCEcTKU=\", false, function () {\n  return [useParams, useHistory];\n});\n_c = Game1;\nexport default Game1;\nvar _c;\n$RefreshReg$(_c, \"Game1\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useHistory","jsxDEV","_jsxDEV","Fragment","_Fragment","Game1","_s","exerciseId","exercise","setExercise","user","setUser","userExperience","setUserExperience","level","setLevel","history","fetchExercise","response","get","exerciseData","data","codewarsResponse","codewarsId","title","name","description","code","answer","python","error","console","fetchUser","experiencePoints","handleCompleteExercise","newExperience","newLevel","Math","floor","put","_id","completedChallenges","then","alert","push","catch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/erick/Documents/prototipo-lec/frontend/src/components/Game1.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\n\r\nconst Game1 = () => {\r\n  const { exerciseId } = useParams(); // Obtén el ID del ejercicio de la URL\r\n  const [exercise, setExercise] = useState(null);\r\n  const [user, setUser] = useState(null); // Información del usuario\r\n  const [userExperience, setUserExperience] = useState(0);\r\n  const [level, setLevel] = useState(1);\r\n  const history = useHistory();\r\n\r\n  // Obtener el ejercicio desde la base de datos\r\n  useEffect(() => {\r\n    const fetchExercise = async () => {\r\n      try {\r\n        const response = await axios.get(`/api/exercises/${exerciseId}`);\r\n        const exerciseData = response.data;\r\n\r\n        // Obtener detalles de Codewars usando el codewarsId\r\n        const codewarsResponse = await axios.get(`/api/codewars/challenge/${exerciseData.codewarsId}`);\r\n        setExercise({\r\n          ...exerciseData,\r\n          title: codewarsResponse.data.name,\r\n          description: codewarsResponse.data.description,\r\n          code: exerciseData.answer.python // Usar solo Python por ahora\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error al obtener el ejercicio:\", error);\r\n      }\r\n    };\r\n\r\n    fetchExercise();\r\n  }, [exerciseId]);\r\n\r\n  // Obtener el usuario desde la base de datos\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const response = await axios.get('/api/users/67869f7defd086ba28f87d41'); // Usar el ID del usuario\r\n        setUser(response.data);\r\n        setUserExperience(response.data.experiencePoints);\r\n        setLevel(response.data.level);\r\n      } catch (error) {\r\n        console.error(\"Error al obtener el usuario:\", error);\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, []);\r\n\r\n  // Manejar la correcta finalización del ejercicio\r\n  const handleCompleteExercise = () => {\r\n    // Supongamos que el usuario completó el ejercicio correctamente\r\n    const newExperience = userExperience + 100; // Aumentamos 100 puntos de experiencia\r\n\r\n    // Verificamos si el usuario ha alcanzado 1000 puntos para aumentar de nivel\r\n    const newLevel = newExperience >= 1000 ? Math.floor(newExperience / 1000) + 1 : level;\r\n\r\n    // Actualizamos el estado del usuario\r\n    setUserExperience(newExperience);\r\n    setLevel(newLevel);\r\n\r\n    // Aquí deberíamos actualizar los datos del usuario en el backend\r\n    axios.put(`/api/users/${user._id}`, {\r\n      experiencePoints: newExperience,\r\n      level: newLevel,\r\n      completedChallenges: [...user.completedChallenges, exerciseId],\r\n    }).then(() => {\r\n      alert(\"¡Ejercicio completado!\");\r\n      history.push(`/game${newLevel}`); // Redirigir a la siguiente página del juego\r\n    }).catch(error => {\r\n      console.error(\"Error al actualizar el usuario:\", error);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"game-container\">\r\n      {exercise && user ? (\r\n        <>\r\n          <div className=\"exercise-details\">\r\n            <h2>{exercise.title}</h2>\r\n            <p>{exercise.description}</p>\r\n          </div>\r\n          \r\n          <div className=\"exercise-code\">\r\n            <h3>Complete the following code:</h3>\r\n            <pre>{exercise.code}</pre>\r\n          </div>\r\n\r\n          <div className=\"user-info\">\r\n            <p>Level: {level}</p>\r\n            <p>Experience: {userExperience}</p>\r\n          </div>\r\n\r\n          <button onClick={handleCompleteExercise}>Complete Exercise</button>\r\n        </>\r\n      ) : (\r\n        <p>Loading exercise and user information...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game1;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}